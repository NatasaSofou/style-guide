= Architectural clarifications

== Consumer context

The consumers of SEMIC standards specification can be divided into three categories:

* business users and domain experts,
* technicians, software engineers, and software architects, the developers
* software systems implementing the standards, the machines

image::ac-consumer-context.png[alt=consumer-context,width=80%,height=]

The SEMIC goal is to bring these groups together and "speak the same language" and share meaning and conceptual references. Besides the very useful and much needed alignment of domains experts on what concepts mean, it is necessary to bring the gap between domain experts and the technical experts who implement information systems. Then, the domain experts and business users shall interact with the information systems using the very same set of concepts, unpolluted and undistorted by the technology in the implementation process.

image::ac-consumer-context-standards.png[alt=consumer-context-standards,width=60%,height=]

Standard _semantic data specifications_ fulfil the purpose keeping these three groups in sync.

Ultimately, if the systems are based on standards the purpose is to build interoperable machines - machines that share data which each other and are able to operate on them seamlessly. For that we need developers that build those machine interactions: so the machines and developers must "find a common language". But in order that the developers do the right things, the business/domain experts have to interact with them and convey their domain knowledge. This closes the loop: that the machine interaction correspond with the business/domain expert expectations.

image::ac-data-specification-composition.png[alt=composition of a data specification,width=80%,height=]

The data specification shall address the following information needs: visual representation, textual description, machine interpretable representation, and optionally additional representations that facilitate and promote adoption.

== Editorial context

The aim of this style guide is to ensure the creation of coherent data specifications that can be read and used by _domain experts, developers and machines_. It is mainly meant for the editors of the data specifications (e.g. semantic engineers, data architects, knowledge modelling specialists).

image::ac-editor-context.png[alt=editor-context,width=80%,height=]

Such data specifications are primarily developed in collaboration with domain experts. To achieve synergy with the domain experts, graphical representation is an indispensable medium that facilitates knowledge elicitation, ideation and knowledge organisation. This becomes especially relevant when shared conceptualisation needs to be attained within a Working Group.



[[sec:separation-of-concerns-and-transformation]]
== Separation of concerns and transformation
The successful application of an ontology or the development of an ontology-based system depends not merely on building a good ontology but also on fitting this into an appropriate development process and implementation into an information system.

Generally, computing information models suffer from the intertwining of two types of semantic concerns. As George Box said, _“All models are wrong, but some are useful”_, and what a model is useful for depends on what concern it is primarily addressing.
On the one hand, the model represents (purely) the domain; on the other hand, it represents the implemented system, which encompasses a representation of the domain (domain knowledge intertwined with technical specificities). These different representation requirements place different demands upon its structure [xref:references.adoc#ref:12[12]]. For example, the concept of “location” can be described by domain experts (in a domain model) in a way that is not isomorphic to how the “location” class may be appropriately modelled for an information system (i.e. captured in an Implementation Model).

One of the common ways to manage this problem is by separating concerns. We take inspiration from OMG’s Model Driven Architecture (MDA) [xref:references.adoc#ref:13[13]] which is a well-documented structure where a model is built for each concern, which is transformed into a different model for a different concern. This approach is adapted to the SEMIC needs.

Transformation deals with producing different models, viewpoints, or artefacts from a model based on a transformation pattern. In general, transformation can produce one representation from another or cross levels of abstraction or architectural layers
[xref:references.adoc#ref:14[14]].


[[sec:separation-of-concerns-in-SEMIC]]
== Separation of concerns in SEMIC
The Core Vocabularies and the specialised Application Profiles aim to address the following concerns:

* Domain experts need to agree on the definitions of concepts, relations and their organisation to form a coherent domain
model expressed with varying levels of details and expressivity [xref:gc-semantic-conventions.adoc#sec:sc-r2[rule SC-R2]],
a shared conceptualisation.
** This is addressed with conceptual models expressed in UML.
* The shared conceptualisation needs to be explicitly represented in a usable format (i.e. operated on) by the machines.
** This is addressed with lightweight ontologies expressed in OWL 2.
* In practice, to achieve interoperability, it is necessary to provide a (minimum and necessary) set of constraints supporting
the ontology instantiation.
** This is addressed with data shapes expressed in SHACL.
* To facilitate reuse and understanding, a specification shall be accessible to the community as clear, complete and well-articulated
documentation.
** This is addressed with data specification documents expressed in HTML.



In addition, when multiple artefacts addressing each concern are produced, keeping them in synch is a serious editorial and maintenance burden that needs to be considered.

== Editorial synchronisation problem

On the editorial side the artefacts composing data specification need to be kept in sync. A modification done in one shall pervade and propagate in all others. This is a difficult, tedious and expensive activity if such synchronisation is to be done manually.

image::ac-editor-sync-problem.png[alt=editor-sync-problem,width=90%,height=]

Experience shows that using a pivot representation as a single source of truth is a viable solution. Such representation needs to be expressive enough to fulfill all the information needs of the derived representations.

[[sec:transformation]]
== Transformation of the conceptual model

UML conceptual models can be used as the _single source of truth_ [xref:gc-conceptual-model-conventions.adoc#sec:cmc-r1[rule CMC-R1]]. This means it is sufficiently expressive to capture multiple modelling aspects/concerns simultaneously. The other artefacts are then fully or partially derived from the conceptual model.

With UML as the source of truth, the update process is easier to perform as it only has to be done in a single place. The other representations are automatically derived from the conceptual model; the maintenance is less error-prone, uniform and easy [xref:arhitectural-clarifications.adoc#sec:transformation[Transformation]].

This approach facilitates consistent maintenance of semantic data specification interrelationship and solves the editorial synchronisation problem.

Using UML by itself is not enough, however. An expressive conceptual model bears risks, however: first is the slippage of ambiguity, and second is the introduction of multiple interpretations. These risks are mitigated by adopting precise interpretation rules provided in this style guide [xref:gc-conceptual-model-conventions.adoc#sec:cmc-r2[CMC-R2]].
Each of the above concerns will lead to different interpretations of the same UML constructs and therefore [xref:gc-conceptual-model-conventions.adoc#sec:cmc-r2[CMC-R2]] defines a minimal set of such interpretation rules (, which that can be further extended if necessary).

Also, UML cannot cover all potential needs specific to each derived representation. Therefore, the scope of this architecture is limited by what can be expressed in UML and how that information is utilised to generate formal statements. But from our experience it is sufficient to cover all the needs of establishing semantic interoperability standards.

image::ac-artefact-generation.png[alt=artefact generation from conceptual model,width=,height=]

Relations between the artefacts are depicted in the figure above. The conceptual model is the source from which a) the data shapes,
b) the formal ontology and c) the data specification document can be generated. Each artefact in the figure is qualified with two
terms, the representation standard and the most characteristic feature. The conceptual model is expressed in UML language and shall
be conformant with the conventions provided in this style guide and the interpretation rules
[xref:gc-conceptual-model-conventions.adoc#sec:cmc-r2[rule CMC-R2]]. The formal ontology is expressed in OWL 2 language and shall
be _lightweight_ as indicated in this convention [xref:gc-semantic-conventions.adoc#sec:sc-r2[rule SC-R2]]. The data shape is expressed
in SHACL language and is characterised by the appropriate level of permissiveness [xref:gc-data-shape-conventions.adoc#sec:dsc-r2[rule DSC-R2]].
The documentation is represented in HTML format and the wording used shall be as precise as possible to capture the meaning accurately
and clearly express the intention of the authors.

image::ac-artefact-generation-add.png[alt=artefact generation from conceptual model,width=,height=]

The figure above depicts that it is also possible to derive from the conceptual model additional artefacts, such as the XSD or JSON schemas and JSON-LD context definitions.
These, however, are not addressed in this style guide.

One condition the conceptual model shall satisfy is that it shall comply with a set of pre-established conventions
(xref:gc-general-conventions.adoc[general conventions] and xref:gc-conceptual-model-conventions.adoc[UML conventions]) and have a
fixed interpretation [xref:gc-conceptual-model-conventions.adoc#sec:cmc-r2[rule CMC-R2]].

The guidelines in this document enable and constrain the transformation process, making it precise enough to implement a
toolchain that automatically performs conformance checking and necessary transformation operations. How this is done, however,
is beyond the scope of this document, and the reader may refer to SEMIC toolchain [xref:references.adoc#ref:15[15]] or other similar implementations such
as model2owl [xref:references.adoc#ref:16[16]] or OSLO toolchain [xref:references.adoc#ref:17[17]] projects.


[[sec:on-data-specification-and-artefact-types]]
== On data specification and artefact types
For any given data specification, various concerns shall be addressed separately, each in a dedicated artefact type. Therefore,
the CVs or APs shall be published as a set of artefacts, each addressing a specific concern. The union of these artefacts forms
the intended semantic data specification [xref:terminological-clarifications.adoc#sec:what-is-a-semantic-data-specification[What is a semantic data specification?]].

The table below summarises which artefacts shall be published for each type of data specification addressed in the SEMIC context.

[cols="3,3,3,3,3,3"]
|===
||*Conceptual model (UML)*|*Ontology (OWL 2)*|*Data shape (SHACL)*|*Specification documentation (HTML)*|*Model diagram (PNG)*
|*Core Vocabulary*|Mandatory|Mandatory|Optional (shall be permissive)|Mandatory|Optional
|*Application Profile*|Mandatory|Optional(shall be an extension)|Mandatory|Mandatory|Optional
|===

[[sec:artefact-types]]
=== Artefact types
The semantic data specifications, both CVs and APs, are conceived as a union of specification artefacts, each addressing a different aspect/concern:

* conceptual model expressed in UML
* formal ontology expressed in OWL 2
* data shapes expressed in SHACL
* data specification document realised in HTML
* conceptual model diagrams expressed in any image format (PNG, for example)

[[sec:data-specification-types]]
=== Data specification types
In the SEMIC context two types of data specifications are of main concern (a) Core Vocabularies designed with broad interoperability
goals and (b) Application Profiles designed with application oriented interoperability goals.

In this document, we will refer to these data specification types to provide guideline refinements depicting variations based
on the data specification type. The primary concern and the intention in each of them differ as follows:

* Core Vocabularies aim at establishing the shared vocabulary as a lightweight ontology essentially, and optionally some data
shapes if necessary [xref:terminological-clarifications.adoc#sec:what-is-a-cv-specification[Core Vocabulary]].
* Application Profiles aim at setting carefully designed data shapes on reused concepts from one or several existent ontologies
and, optionally, a minimal ontology with specialised vocabulary [xref:terminological-clarifications.adoc#sec:what-is-an-ap-specification[Application Profile]].

The secondary concerns are present and common in both data specification types and are, in fact, instrumental to consistent production,
maintenance and publication:

* Editing of the conceptual model
* Production of data specification document

The data specification’s artefacts are not independent but tightly interrelated and transformed from one form into another one.