[[sec:architecture]]
== Architectural considerations

There is a range of requirements that the Core Vocabulary needs to cover
in order to facilitate interoperability. These requirements cannot be
fulfilled in a single artefact for the reasons provided below.
This section describes Core Vocabulary artefacts how they are
structured and how they relate to each other.

NOTE: This section is adapted from the ePO ontology Architecture

[[sec:separation-conceprns]]
=== Separation of concerns

The successful application of an ontology or the development of an
ontology-based system depends not just on building a good ontology but
also on fitting this into an appropriate development process. All
computing information models suffer from a semantic schizophrenia. On
the one hand, the model represents the domain; on the other hand, it
represents the implemented system, which then represents the domain.
These different representation requirements place different demands upon
its structure .

One of the common ways to manage this problem is a separation of
concerns. OMGâ€™s Model Driven Architecture (MDA) <<MDA>> is a well-documented
structure where a model is built for each concern and this is
transformed into specific artefacts each addressing a different concern.

_Transformation_ deals with producing different models, viewpoints, or
artefacts from a model based on a transformation pattern. In general,
transformation can be used to produce one representation from another,
or to cross levels of abstraction or architectural layers .

// The process described in Section
// #sec:process-approach[[sec:process-approach]] incorporates some of these
// principles and employs model transformation as means to achieve the
// project objectives.

[[sec:layers-components]]
=== Layers and components

This architecture is organised in _horizontal layers_ and vertically
slicing _components_. The _components_ reflect the organisation of the
formal ontology based on a logical content division of the UML
conceptual model into packages and modules. This division increases the
maintainability of entire content. The models and their components are
not disconnected from one another. The relations between them are
represented in Figure #fig:components[1] where each component is
represented as an UML package. The conceptual model serves as the single
source of truth, from which the three components of the formal model are
derived. Each of these components can be further divided into modules.

The main ontology packages are: the _core ontology_, _data shapes_, and
_formal ontology restrictions_. These formal modules are derived from
the conceptual model through model transformations as described in
Section #sec:process-approach[[sec:process-approach]] following the
rules laid out in .

The _core ontology_ is the foundational, and serves as a backbone for
the other components. It establishes the identifiers and the basic
definitions of classes and properties.

The _data shapes_ represent constraints on how the core ontology can be
instantiated and the set of controlled value lists associated to it.

The _formal ontology restrictions_ cover intensional class and property
definitions used for deriving additional knowledge from factual
information. Both, the data shapes and the ontology restrictions are
defined as extensions that are flashing out the core ontology which
plays, in this case the role of a backbone.

image::../img/uml.png[The main components of the eProcurement ontology
and their relation to each other and the UML conceptual
model,scaledwidth=99.0%]

This architecture distinguishes the following layers: the _conceptual
layer_, _core definition layer_, _validation layer_ and _reasoning
layer_. These _layers_ can be thought of as formal languages with
well-defined boundaries and extents. The diagram in Figure
#fig:layers[2] presents the organisation the ontology layers along two
axes: _expressivity_ and _detail_.

The _expressivity_ of a language is the breadth of ideas that can be
represented and communicated in that language. The more expressive the
language is, the greater the variety and quantity of ideas it can be
used to represent. The design of a language and its formalism involves
an inevitable trade-off between the expressive power and its
``analysability'', which translates directly into computation
difficulty. The more a formalism can express, the harder it becomes to
understand, i.e. compute, what do instances of it mean.

The _detail_ refers to how much description and aspects of the domain
concepts are considered. This dimension plays a pragmatic rather than
formal role. The rationale is that lower level of detail is useful and
re-usable to a wider public, but for a set of relatively simple tasks.
As the level of detail increases, the difficulty to operate on it also
increases thus the user base shrinks and the task complexity rises.

The detail axis starts, on one side, from establishing the concepts
identity, labels, natural language definitions; continues through
establishing relations and constraints; and ends, on the other side,
with formulating special logical conditions, implications and inference
rules.

image::../img/eProcurement-layers[Expressivity and extent of the
eProcurement ontology layers,scaledwidth=80.0%]

The _conceptual layer_ accommodates informal representation of the
business objects, places, things, actors in the ``real world'' not
representations of these things in the information system. It is
situated at the base of the diagram with lowest expressivity because it
has not formal semantics but with a wide coverage of detail. The dotted
line delimits the border between formal and informal layers.

In the conceptual layer is situated the _UML conceptual model_, which is
described in Section #sec:uml-model[1.3]. This model is also called
_computation independent model_ because it is informal and its main
purpose is to interface the domain experts with an explicit conceptual
representation of the domain.

In the formal section of the diagram, the expert knowledge is expressed
using descriptive languages with a formal semantics (see Section
#sec:semantics[2.2]), which in this architecture are primarily OWL 2 and
SHACL.

The _core layer_, is situated in the core ontology, which has as a
primary goal to define the main concepts and relations of the ontology.
It is limited to the declarative axioms of the ontology and therefore
serves primarily for vocabulary and identity establishment. For this
reason, it is represented as having the lowest formal expressivity and
the lightest level of detail in comparison to other layers. It plays the
role of a backbone which is flashed out by other layers.

The _validation layer_ accommodates declarations of data shapes which
represent constraints on the instance data, i.e. the ABox (see Section
#sec:model-data[2.1]). The assertions in this layer are interpreted done
under the closed world assumption, making it possible to support
validation functionality. The SHACL shapes are situated in this layer
and are addressed in detail in Section #sec:shapes[1.5].

The validation layer is situated immediately above the core definitions,
being more expressive but also extending it with additional detail.
Therefore, it is shifted, on the detail axis, to the right towards more
detail and leaving out the simple axioms as they are already covered in
the core later.

The _reasoning layer_ accommodates formal intensional definitions of the
classes and properties. In Logics, _intensional definition_ gives the
meaning of a term by specifying necessary and sufficient conditions for
when the term should be used. This layer is mostly formed of subclass
restrictions and complex class definitions, and as well, domain and
range specifications for properties. This layer provides assertions
necessary to support consistency checking and classification reasoning
functionalities for eProcurement ontology. The formal ontology
restrictions component is situated in this layer and is described in
Section #sec:restrictions[1.6].

Just like in the case of the restrictions layer, the reasoning layer
extends the core layer with higher level of detail and comprising
assertions with higher expressive power. Therefore, the simple details
rest in the core layer permitting this one to focus on other ones. For
this reason, it is depicted as shifted to the towards the right side of
detail axis.

[[sec:uml-model]]
=== UML conceptual model

The conceptual model is represented in UML serves as the single source
of truth. Thus, the scope of this architecture is limited by what can be
expressed in UML and how that information is utilised to generate formal
statements. Each of the above functions will lead to different
interpretations of the same UML model.

The primary application of UML for ontology design is in the
specification of class diagrams for object-oriented software. However,
UML does not have a clearly specified declarative semantics, so that it
is not possible to determine whether an ontology is consistent, or to
determine the correctness of an implementation of the ontology. Semantic
integration in such cases becomes a subjective exercise, validated only
by the opinions of the human designers involved in the integration
effort .

On the other hand, UML is closer than more logic-oriented approaches to
the programming languages in which enterprise applications are
implemented. For this reason, in the current project we have decided to
develop agreements on the informal semantics of the UML-based conceptual
model. It consists of a set of explicit conventions for naming and
structuring UML elements and for transforming UML to OWL .

[[sec:core-ontology]]
=== Core ontology component

This component constitutes the backbone of the eProcurement ontology. It
is the simplest from the formal point of view and lightest in terms of
detail.

The main purpose of this component is to declare the classes, properties
datatypes and controlled lists. It established, in a machine readable
format, the concepts by assigning each an URI and decorating it with a
human readable labels and descriptions. This represents a mechanism that
established a common understanding between humans and machine.

It is void of any constraints or restrictions and may be used as a
formal ontology or as a data exchange vocabulary.

[[sec:shapes]]
=== SHACL data shapes component

In OWL the constraints are formed at the semantic level in the way the
logic of the entire knowledge base holds together consistently. It is
not always easy or obvious how the constraints should be formed so that
they fulfil a business or application requirement. Moreover, in practice
often the kind of constraints necessary are those aiming at the surface
representation of the data. Take, XSD for example, it provides a
description of how an XML document ought to be structured.

In the eProcurement domain, before the RDF data is utilised as a
semantic resource, it must first respect a more formal conventions on
how it is instantiated and organised. There is a need for the XSD
counterpart for the RDF graphs.

_Shapes Constraint Language (SHACL)_ is a specification for validating
graph-based data against a set of conditions. It provides a concise,
uniform syntax for both describing and constraining the contents of an
RDF graph. Among others, SHACL includes features to express conditions
that constrain the number of values that a property may have, the type
of such values, numeric ranges, string matching patterns, and logical
combinations of such constraints.

_Application profiles (AP)_ represent a set of constraints on the
logical model tying it to a particular system implementation. The
application profiles, in this project, must be expressed using SHACL
language. The approach taken by the Publications Office to develop APs
is described in . The same style should be maintained for the
eProcurement APs.

The AP must be conceived as extending the core ontology and fleshing the
classes and properties with node and property shapes (see ). The
constraints available in the conceptual model are generic and should be
automatically generated. However, when it comes to integration with
specific systems, these constraints may not be sufficient, possibly even
too rigid at times. Therefore, it is recommended to conceptualise the
data shapes not a single fit it all AP but rather to create specific APs
as the needs arise.

[[sec:restrictions]]
=== Formal ontology restrictions component

This component accommodates formal intensional definitions of the
classes and properties. It is mostly formed of subclass restrictions,
complex class definitions, domain and range specifications for
properties; which can be derived from the conceptual model.

This component provides the rules and logical conditions for reasoning
with eProcurement ontology. And so, the statements from this component
play the role of necessary and sufficient conditions to support
consistency checking and classification reasoning functionalities for
eProcurement ontology.

Mostly expressions in OWL 2 should be acceptable for the reasoning
purposes of eProcurement ontology. It is possible, however, that OWL 2
is too expressive, leading to slow reasoning, and thus downgrading to
OWL dialect (EL, QL, RL) might be necessary. This implies that multiple
variants of this components should be generated, one for each OWL
dialect as described in Section #sec:expressivity[2.4]. Each of these
variants shall be tested and the most appropriate choice selected for
reasoning in the validation phase (see Section
#sec:ontology-validation[[sec:ontology-validation]]).

